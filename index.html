<html><head><base href="https://example.com">
<meta charset="UTF-8">
<title>AndrijanoOS</title>
<style>
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    scroll-behavior: smooth;
}

body {
    background: #1a1a1a;
    color: #fff;
    overflow: hidden;
}

.desktop {
    width: 100vw;
    height: 100vh;
    position: relative;
    background-size: cover;
    background-position: center;
}

.taskbar {
    position: fixed;
    bottom: 0;
    width: 100%;
    height: 50px;
    background: #333;
    display: flex;
    align-items: center;
    padding: 0 20px;
    box-shadow: 0 -2px 10px rgba(0,0,0,0.3);
    z-index: 1000;
}

.start-button {
    background: #0078D7;
    padding: 8px 15px;
    border-radius: 4px;
    cursor: pointer;
    transition: 0.3s;
}

.start-button:hover {
    background: #0086f0;
}

.start-menu {
    position: fixed;
    bottom: 50px;
    left: 0;
    width: 100%;
    height: 60vh;
    background: rgba(38, 38, 38, 0.95);
    display: none;
    padding: 20px;
    grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
    gap: 20px;
    overflow-y: auto;
    z-index: 999;
}

.start-menu-item {
    text-align: center;
    cursor: pointer;
    padding: 10px;
    border-radius: 5px;
    transition: 0.3s;
}

.start-menu-item:hover {
    background: #0078D7;
}

.time {
    margin-left: auto;
    padding: 10px;
    min-width: 200px; /* Added to accommodate the longer text */
    text-align: right;
}

.window {
    position: absolute;
    width: 600px;
    height: 400px;
    background: #2d2d2d;
    border-radius: 8px;
    box-shadow: 0 0 20px rgba(0,0,0,0.5);
    overflow: hidden;
    display: none;
    z-index: 100;
}

.window-header {
    background: #333;
    padding: 10px;
    display: flex;
    align-items: center;
    justify-content: space-between;
}

.window-header .close-button {
    background: #ff4444;
    color: white;
    padding: 4px 8px;
    border-radius: 4px;
    cursor: pointer;
    transition: 0.2s;
}

.window-header .close-button:hover {
    background: #ff6666;
    transform: scale(1.1);
}

.window-content {
    padding: 20px;
    max-height: calc(100% - 40px); /* Subtract header height */
    overflow-y: auto;
    overflow-x: hidden;
}

.desktop-icon {
    width: 80px;
    text-align: center;
    margin: 20px;
    cursor: pointer;
    float: left;
    transition: transform 0.2s;
}

.desktop-icon:hover {
    transform: scale(1.1);
}

.icon-svg {
    width: 48px;
    height: 48px;
    margin-bottom: 5px;
}

.icon-text {
    font-size: 12px;
    color: white;
    text-shadow: 1px 1px 2px black;
}

.settings-grid {
    display: grid;
    grid-template-columns: 1fr 2fr;
    gap: 10px;
    margin-top: 20px;
}

.background-preview {
    width: 100%;
    height: 100px;
    border: 2px solid #444;
    border-radius: 4px;
    margin-top: 5px;
    background-size: cover;
    background-position: center;
}

.web-link {
    padding: 5px;
    border: 1px solid #ddd;
    border-radius: 4px;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 5px;
}

.web-link:hover {
    background: #f0f0f0;
}

#wikiContent {
    background: #2d2d2d;
    transition: background-color 0.3s;
    height: calc(100% - 80px) !important; /* Adjust for header and save button */
    overflow-y: auto !important;
}

#wikiContent:focus {
    background: #363636;
    outline: none;
}

#wikiContent h3 {
    margin-top: 15px;
    margin-bottom: 10px;
    color: #4CAF50;
}

#wikiContent p {
    margin-bottom: 10px;
}

#wikiContent ul {
    margin-left: 20px;
    margin-bottom: 10px;
}

.progress-bar {
    width: 100%;
    height: 8px;
    background: #333;
    border-radius: 4px;
    margin: 5px 0;
    overflow: hidden;
}

.progress-bar div {
    height: 100%;
    background: #00C853;
    transition: width 0.3s ease;
}

.stat-item {
    margin: 10px 0;
}

.security-item {
    margin: 10px 0;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.status-badge {
    padding: 4px 8px;
    border-radius: 12px;
    background: #00C853;
    color: white;
    font-size: 12px;
}

#scanStatus {
    color: #888;
}

#threatsList {
    margin-top: 10px;
    color: #888;
}

#browserContent {
    height: calc(100% - 120px) !important; /* Adjust for header and search bar */
    overflow-y: auto !important;
}

.window-content::-webkit-scrollbar {
    width: 8px;
}

.window-content::-webkit-scrollbar-track {
    background: #1a1a1a;
}

.window-content::-webkit-scrollbar-thumb {
    background: #444;
    border-radius: 4px;
}

.window-content::-webkit-scrollbar-thumb:hover {
    background: #555;
}

#securityStatus, #scanSection {
    max-height: calc(100vh - 300px);
    overflow-y: auto;
}

.tool-button.active {
    background: #0078D7;
    color: white;
}

.paint-toolbar button {
    background: #444;
    border: 1px solid #666;
    color: #fff;
    border-radius: 3px;
    cursor: pointer;
}

.paint-toolbar button:hover {
    background: #555;
}

.paint-toolbar select {
    background: #444;
    color: #fff;
    border: 1px solid #666;
    border-radius: 3px;
}

.paint-toolbar input[type="color"] {
    width: 30px;
    height: 30px;
    padding: 0;
    border: none;
    border-radius: 3px;
    cursor: pointer;
}

@keyframes flame {
    0% { background-position: 0 0; }
    100% { background-position: -200% 0; }
}

.flame-background {
    background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><path fill="%23ff4400" d="M50 10c0 0-20 25-20 40s10 30 20 30s20-15 20-30S50 10 50 10z"><animate attributeName="d" dur="1.5s" repeatCount="indefinite" values="M50 10c0 0-20 25-20 40s10 30 20 30s20-15 20-30S50 10 50 10z;M50 15c0 0-15 20-15 35s8 25 15 25s15-10 15-25S50 15 50 15z;M50 10c0 0-20 25-20 40s10 30 20 30s20-15 20-30S50 10 50 10z"/></path></svg>');
    background-size: 200% 100%;
    animation: flame 2s linear infinite;
}

.hatred-popup {
    position: fixed;
    background: #ff0000;
    color: #fff;
    padding: 20px;
    border: 2px solid #000;
    box-shadow: 0 0 20px rgba(255,0,0,0.5);
    z-index: 9999;
    font-family: "Courier New", monospace;
    font-weight: bold;
    min-width: 300px;
    animation: shake 0.5s infinite;
}

@keyframes shake {
    0%, 100% { transform: translate(0, 0) rotate(0deg); }
    25% { transform: translate(5px, 5px) rotate(5deg); }
}

/* Add these styles to enhance the creepy effect */
@keyframes glitch {
    0% { transform: translate(0); }
    20% { transform: translate(-2px, 2px); }
    40% { transform: translate(2px, -2px); }
    60% { transform: translate(-2px, -2px); }
    80% { transform: translate(2px, 2px); }
    100% { transform: translate(0); }
}

.desktop-icon[onclick*="hatred"] .icon-svg {
    animation: glitch 0.3s infinite;
}

.desktop-icon[onclick*="hatred"]:hover .icon-svg {
    filter: drop-shadow(0 0 5px #ff0000);
}
</style>
</head>
<body>
<div class="desktop" id="desktop">
    <div class="desktop-icon" onclick="openWindow('about')">
        <svg class="icon-svg" viewBox="0 0 24 24">
            <defs>
                <linearGradient id="aboutGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                    <stop offset="0%" style="stop-color:#4F46E5"/>
                    <stop offset="100%" style="stop-color:#7C3AED"/>
                </linearGradient>
            </defs>
            <rect x="2" y="2" width="20" height="20" rx="10" fill="url(#aboutGrad)"/>
            <path fill="white" d="M12 7.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zm0 6c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5z"/>
        </svg>
        <div class="icon-text">About</div>
    </div>

    <div class="desktop-icon" onclick="openWindow('firefox')">
        <svg class="icon-svg" viewBox="0 0 512 512">
            <defs>
                <linearGradient id="firefoxGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                    <stop offset="0%" style="stop-color:#FF9500"/>
                    <stop offset="100%" style="stop-color:#FF5B00"/>
                </linearGradient>
            </defs>
            <path fill="url(#firefoxGrad)" d="M503.2 241.3c-.1-.1-.2-.2-.3-.3-1.1-1.1-2.2-2.2-3.3-3.3-1.5-1.5-3.1-2.9-4.7-4.3-1.7-1.5-3.5-3-5.3-4.4-1.8-1.4-3.7-2.7-5.6-4-1.9-1.3-3.9-2.5-5.9-3.7-2-1.2-4.1-2.3-6.2-3.4-2.1-1.1-4.3-2.1-6.5-3.1-2.2-.9-4.4-1.8-6.7-2.6-2.3-.8-4.6-1.5-6.9-2.2-2.3-.7-4.7-1.3-7.1-1.8-2.4-.5-4.8-1-7.2-1.4-2.4-.4-4.9-.7-7.3-1-2.5-.3-4.9-.5-7.4-.6-2.5-.1-5 .1-7.5.2-2.5.1-5 .3-7.4.6-2.5.3-4.9.6-7.3 1-2.4.4-4.8.9-7.2 1.4-2.4.5-4.7 1.1-7.1 1.8-2.3.7-4.6 1.4-6.9 2.2-2.3.8-4.5 1.7-6.7 2.6-2.2 1-4.4 2-6.5 3.1-2.1 1.1-4.2 2.2-6.2 3.4-2 1.2-4 2.4-5.9 3.7-1.9 1.3-3.8 2.6-5.6 4-1.8 1.4-3.6 2.9-5.3 4.4-1.6 1.4-3.2 2.8-4.7 4.3-1.1 1.1-2.2 2.2-3.3 3.3-.1.1-.2.2-.3.3-21.8 22-35.3 52.2-35.3 85.6 0 67.1 54.5 121.6 121.6 121.6S503.2 394 503.2 326.9c0-33.4-13.5-63.6-35.3-85.6z"/>
        </svg>
        <div class="icon-text">Firefox</div>
    </div>

    <div class="desktop-icon" onclick="openWindow('settings')">
        <svg class="icon-svg" viewBox="0 0 24 24">
            <path fill="#888" d="M19.14,12.94c0.04-0.3,0.06-0.61,0.06-0.94c0-0.32-0.02-0.64-0.07-0.94l2.03-1.58c0.18-0.14,0.23-0.41,0.12-0.61 l-1.92-3.32c-0.12-0.22-0.37-0.29-0.59-0.22l-2.39,0.96c-0.5-0.38-1.03-0.7-1.62-0.94L14.4,2.81c-0.04-0.24-0.24-0.41-0.48-0.41 h-3.84c-0.24,0-0.43,0.17-0.47,0.41L9.25,5.35C8.66,5.59,8.12,5.92,7.63,6.29L5.24,5.33c-0.22-0.08-0.47,0-0.59,0.22L2.74,8.87 C2.62,9.08,2.66,9.34,2.86,9.48l2.03,1.58C4.84,11.36,4.8,11.69,4.8,12s0.02,0.64,0.07,0.94l-2.03,1.58 c-0.18,0.14-0.23,0.41-0.12,0.61l1.92,3.32c0.12,0.22,0.37,0.29,0.59,0.22l2.39-0.96c0.5,0.38,1.03,0.7,1.62,0.94l0.36,2.54 c0.05,0.24,0.24,0.41,0.48,0.41h3.84c0.24,0,0.44-0.17,0.47-0.41l0.36-2.54c0.59-0.24,1.13-0.56,1.62-0.94l2.39,0.96 c0.22,0.08,0.47,0,0.59-0.22l1.92-3.32c0.12-0.22,0.07-0.47-0.12-0.61L19.14,12.94z M12,15.6c-1.98,0-3.6-1.62-3.6-3.6 s1.62-3.6,3.6-3.6s3.6,1.62,3.6,3.6S13.98,15.6,12,15.6z"/>
        </svg>
        <div class="icon-text">Settings</div>
    </div>

    <div class="desktop-icon" onclick="openWindow('wiki')">
        <svg class="icon-svg" viewBox="0 0 24 24">
            <rect width="20" height="20" x="2" y="2" fill="#4CAF50" rx="2"/>
            <text x="12" y="16" text-anchor="middle" fill="white" font-size="12">W</text>
        </svg>
        <div class="icon-text">Andrej Wiki</div>
    </div>

    <div class="desktop-icon" onclick="openWindow('trash')">
        <svg class="icon-svg" viewBox="0 0 24 24">
            <path fill="#888" d="M6,19c0,1.1,0.9,2,2,2h8c1.1,0,2-0.9,2-2V7H6V19z M19,4h-3.5l-1-1h-5l-1,1H5v2h14V4z"/>
        </svg>
        <div class="icon-text">Trash</div>
    </div>

    <div class="desktop-icon" onclick="openWindow('security')">
        <svg class="icon-svg" viewBox="0 0 24 24">
            <path fill="#00C853" d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11v8.8z"/>
        </svg>
        <div class="icon-text">Security Center</div>
    </div>

    <div class="desktop-icon" onclick="openWindow('paint')">
        <svg class="icon-svg" viewBox="0 0 24 24">
            <rect width="20" height="20" x="2" y="2" fill="#4488FF" rx="2"/>
            <path fill="white" d="M7 14c-1.66 0-3 1.34-3 3 0 1.31-1.16 2-2 2 .92 1.22 2.49 2 4 2 2.21 0 4-1.79 4-4 0-1.66-1.34-3-3-3zm13.71-9.37l-1.34-1.34a.996.996 0 0 0-1.41 0L9 12.25 11.75 15l8.96-8.96a.996.996 0 0 0 0-1.41z"/>
        </svg>
        <div class="icon-text">Paint</div>
    </div>

    <div class="desktop-icon" onclick="openWindow('hatred')" style="filter: hue-rotate(180deg);">
        <svg class="icon-svg" viewBox="0 0 24 24">
            <!-- Updated creepy icon with skull and glitch effects -->
            <defs>
                <radialGradient id="skullGrad" cx="50%" cy="50%" r="50%" fx="50%" fy="50%">
                    <stop offset="0%" style="stop-color:#ff0000"/>
                    <stop offset="100%" style="stop-color:#660000"/>
                </radialGradient>
                <filter id="glitch">
                    <feFlood flood-color="red" result="flood1"/>
                    <feFlood flood-color="transparent" result="flood2"/>
                    <feComposite in="SourceGraphic" in2="flood1" operator="in" result="comp1"/>
                    <feComposite in="SourceGraphic" in2="flood2" operator="in" result="comp2"/>
                    <feMorphology operator="dilate" radius="1" in="comp1" result="morph1"/>
                    <feMorphology operator="dilate" radius="1" in="comp2" result="morph2"/>
                    <feOffset dx="-2" dy="0" in="morph1" result="offset1"/>
                    <feOffset dx="2" dy="0" in="morph2" result="offset2"/>
                    <feMerge>
                        <feMergeNode in="offset1"/>
                        <feMergeNode in="offset2"/>
                        <feMergeNode in="SourceGraphic"/>
                    </feMerge>
                </filter>
            </defs>
            <g filter="url(#glitch)">
                <!-- Skull base -->
                <path fill="url(#skullGrad)" d="M12,2c-5.5,0-10,4.5-10,10c0,5.5,4.5,10,10,10s10-4.5,10-10C22,6.5,17.5,2,12,2z M12,15
                    c-1.7,0-3-1.3-3-3s1.3-3,3-3s3,1.3,3,3S13.7,15,12,15z"/>
                <!-- Evil eyes -->
                <path fill="#000" d="M9,11c0,0.6-0.4,1-1,1s-1-0.4-1-1s0.4-1,1-1S9,10.4,9,11z M17,11c0,0.6-0.4,1-1,1s-1-0.4-1-1
                    s0.4-1,1-1S17,10.4,17,11z"/>
                <!-- Creepy mouth -->
                <path fill="#000" d="M8,15.5c0,0,1.5,2.5,4,2.5s4-2.5,4-2.5s-2,1.5-4,1.5S8,15.5,8,15.5z">
                    <animate attributeName="d" 
                        dur="0.5s" 
                        repeatCount="indefinite"
                        values="M8,15.5c0,0,1.5,2.5,4,2.5s4-2.5,4-2.5s-2,1.5-4,1.5S8,15.5,8,15.5z;
                                M7,15c0,0,2,3.5,5,3.5s5-3.5,5-3.5s-2.5,2-5,2S7,15,7,15z;
                                M8,15.5c0,0,1.5,2.5,4,2.5s4-2.5,4-2.5s-2,1.5-4,1.5S8,15.5,8,15.5z"/>
                </path>
            </g>
            <!-- Glitch effect overlay -->
            <circle cx="12" cy="12" r="11" fill="none" stroke="#ff0000" stroke-width="0.5" opacity="0.5">
                <animate attributeName="r" 
                    values="11;11.2;11;10.8;11"
                    dur="0.5s"
                    repeatCount="indefinite"/>
            </circle>
        </svg>
        <div class="icon-text" style="color: #ff0000; text-shadow: 0 0 5px #ff0000;">hatred.</div>
    </div>

    <div class="desktop-icon" onclick="openWindow('snake')">
        <svg class="icon-svg" viewBox="0 0 24 24">
            <defs>
                <linearGradient id="snakeGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                    <stop offset="0%" style="stop-color:#4CAF50"/>
                    <stop offset="100%" style="stop-color:#2E7D32"/>
                </linearGradient>
            </defs>
            <path fill="url(#snakeGrad)" d="M20,12c0,4.4-3.6,8-8,8s-8-3.6-8-8s3.6-8,8-8S20,7.6,20,12z"/>
            <path fill="#fff" d="M15,12c0-0.6-0.4-1-1-1h-2V9c0-0.6-0.4-1-1-1s-1,0.4-1,1v2H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h2v2c0,0.6,0.4,1,1,1s1-0.4,1-1v-2h2C14.6,13,15,12.6,15,12z"/>
        </svg>
        <div class="icon-text">Snake</div>
    </div>

    <div class="desktop-icon" onclick="openWindow('tetris')">
        <svg class="icon-svg" viewBox="0 0 24 24">
            <defs>
                <linearGradient id="tetrisGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                    <stop offset="0%" style="stop-color:#FF416C"/>
                    <stop offset="100%" style="stop-color:#FF4B2B"/>
                </linearGradient>
            </defs>
            <rect x="4" y="4" width="7" height="7" fill="#FF416C" rx="1"/>
            <rect x="13" y="4" width="7" height="7" fill="#FF4B2B" rx="1"/>
            <rect x="4" y="13" width="7" height="7" fill="#FF4B2B" rx="1"/>
            <rect x="13" y="13" width="7" height="7" fill="#FF416C" rx="1"/>
        </svg>
        <div class="icon-text">Tetris</div>
    </div>

    <div class="desktop-icon" onclick="openWindow('pong')">
        <svg class="icon-svg" viewBox="0 0 24 24">
            <defs>
                <linearGradient id="pongGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                    <stop offset="0%" style="stop-color:#4A00E0"/>
                    <stop offset="100%" style="stop-color:#8E2DE2"/>
                </linearGradient>
            </defs>
            <rect width="20" height="20" x="2" y="2" fill="url(#pongGrad)" rx="2"/>
            <rect x="4" y="8" width="2" height="8" fill="white"/>
            <rect x="18" y="8" width="2" height="8" fill="white"/>
            <circle cx="12" cy="12" r="2" fill="white"/>
        </svg>
        <div class="icon-text">Pong</div>
    </div>

    <div class="window" id="hatredWindow" style="left: 150px; top: 100px; width: 400px; background: #000;">
        <div class="window-header" style="background: #ff0000; color: #000;">
            <span>hatred.</span>
            <span class="close-button" onclick="closeWindow('hatred')">‚úï Close</span>
        </div>
        <div class="window-content" style="color: #ff0000; text-align: center;">
            <h2>SYSTEM INFECTED</h2>
            <div id="hatredTimer" style="font-size: 2em; margin: 20px 0;">5:00</div>
            <div id="hatredMessages"></div>
        </div>
    </div>

    <div class="window" id="aboutWindow" style="left: 100px; top: 100px;">
        <div class="window-header">
            <span>About Andrijano</span>
            <span class="close-button" onclick="closeWindow('about')">‚úï Close</span>
        </div>
        <div class="window-content">
            <h2 style="color: #4F46E5; margin-bottom: 20px;">Welcome to AndrijanoOS 2024</h2>
            
            <div style="background: #2d2d2d; padding: 20px; border-radius: 8px; margin-bottom: 20px;">
                <h3 style="color: #00C853; margin-bottom: 15px;">User Profile</h3>
                <div style="display: grid; grid-template-columns: auto 1fr; gap: 10px;">
                    <div style="font-weight: bold; color: #888;">Username:</div>
                    <div>andrijano24</div>
                    <div style="font-weight: bold; color: #888;">Account Type:</div>
                    <div>System Administrator</div>
                    <div style="font-weight: bold; color: #888;">Build Version:</div>
                    <div>2024.1.0 (Latest)</div>
                    <div style="font-weight: bold; color: #888;">System Theme:</div>
                    <div>Modern Dark</div>
                    <div style="font-weight: bold; color: #888;">Status:</div>
                    <div><span style="color: #00C853">‚óè</span> Active</div>
                </div>
            </div>

            <div style="background: #2d2d2d; padding: 20px; border-radius: 8px; margin-bottom: 20px;">
                <h3 style="color: #4F46E5; margin-bottom: 15px;">System Features</h3>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                    <div>
                        <h4 style="color: #888; margin-bottom: 10px;">Core Features</h4>
                        <ul style="list-style: none;">
                            <li style="margin-bottom: 8px;"><span style="color: #00C853">‚úì</span> Modern UI Design</li>
                            <li style="margin-bottom: 8px;"><span style="color: #00C853">‚úì</span> Real-time Security</li>
                            <li style="margin-bottom: 8px;"><span style="color: #00C853">‚úì</span> File Management</li>
                            <li style="margin-bottom: 8px;"><span style="color: #00C853">‚úì</span> Paint Studio</li>
                        </ul>
                    </div>
                    <div>
                        <h4 style="color: #888; margin-bottom: 10px;">Apps & Tools</h4>
                        <ul style="list-style: none;">
                            <li style="margin-bottom: 8px;"><span style="color: #4F46E5">üì±</span> Firefox Browser</li>
                            <li style="margin-bottom: 8px;"><span style="color: #00C853">üìù</span> Andrej Wiki</li>
                            <li style="margin-bottom: 8px;"><span style="color: #FF4444">üõ°Ô∏è</span> Security Center</li>
                            <li style="margin-bottom: 8px;"><span style="color: #FFB300">üé®</span> Paint Studio</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div style="background: #2d2d2d; padding: 20px; border-radius: 8px;">
                <h3 style="color: #FFB300; margin-bottom: 15px;">System Performance</h3>
                <div class="stat-item">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                        <span>System Resources</span>
                        <span id="resourcesValue">75%</span>
                    </div>
                    <div class="progress-bar">
                        <div style="width: 75%; background: linear-gradient(90deg, #4F46E5, #7C3AED);"></div>
                    </div>
                </div>
                <div class="stat-item">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                        <span>System Health</span>
                        <span>Excellent</span>
                    </div>
                    <div class="progress-bar">
                        <div style="width: 100%; background: linear-gradient(90deg, #00C853, #69F0AE);"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="window" id="firefoxWindow" style="left: 150px; top: 150px; width: 800px; height: 500px;">
        <div class="window-header">
            <span>Firefox Browser</span>
            <span class="close-button" onclick="closeWindow('firefox')">‚úï Close</span>
        </div>
        <div class="window-content">
            <div style="background: #f9f9f9; padding: 10px; border-radius: 4px; color: #333;">
                <input type="text" id="urlBar" placeholder="Enter URL" style="width: 100%; padding: 5px; border: 1px solid #ddd; border-radius: 3px;">
            </div>
            <div style="margin-top: 10px; background: white; color: #333; padding: 10px; border-radius: 4px;">
                <h3>Quick Links</h3>
                <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); gap: 10px; margin-top: 10px;">
                    <div class="web-link" onclick="loadWebsite('google')">
                        <img src="https://www.google.com/favicon.ico" style="width: 16px; height: 16px;">
                        Google
                    </div>
                    <div class="web-link" onclick="loadWebsite('youtube')">
                        <img src="https://www.youtube.com/favicon.ico" style="width: 16px; height: 16px;">
                        YouTube
                    </div>
                    <div class="web-link" onclick="loadWebsite('github')">
                        <img src="https://github.com/favicon.ico" style="width: 16px; height: 16px;">
                        GitHub
                    </div>
                    <div class="web-link" onclick="loadWebsite('facebook')">
                        <img src="https://facebook.com/favicon.ico" style="width: 16px; height: 16px;">
                        Facebook
                    </div>
                    <div class="web-link" onclick="loadWebsite('twitter')">
                        <img src="https://twitter.com/favicon.ico" style="width: 16px; height: 16px;">
                        Twitter
                    </div>
                    <div class="web-link" onclick="loadWebsite('reddit')">
                        <img src="https://www.reddit.com/favicon.ico" style="width: 16px; height: 16px;">
                        Reddit
                    </div>
                    <div class="web-link" onclick="loadWebsite('wikipedia')">
                        <img src="https://www.wikipedia.org/favicon.ico" style="width: 16px; height: 16px;">
                        Wikipedia
                    </div>
                    <div class="web-link" onclick="loadWebsite('netflix')">
                        <img src="https://www.netflix.com/favicon.ico" style="width: 16px; height: 16px;">
                        Netflix
                    </div>
                    <div class="web-link" onclick="loadWebsite('amazon')">
                        <img src="https://www.amazon.com/favicon.ico" style="width: 16px; height: 16px;">
                        Amazon
                    </div>
                </div>
            </div>
            <div id="browserContent" style="margin-top: 10px; background: white; color: #333; padding: 10px; border-radius: 4px; height: calc(100% - 120px) !important; overflow-y: auto !important;">
                <h2>Welcome to Firefox</h2>
                <p>Select a website from Quick Links or enter a URL above</p>
            </div>
        </div>
    </div>

    <div class="window" id="settingsWindow" style="left: 200px; top: 120px;">
        <div class="window-header">
            <span>Settings</span>
            <span class="close-button" onclick="closeWindow('settings')">‚úï Close</span>
        </div>
        <div class="window-content">
            <h2>Desktop Settings</h2>
            <div class="settings-grid">
                <label>Background Color:</label>
                <input type="color" id="bgColorPicker" onchange="updateBackground(this.value)">
                
                <label>Background Image URL:</label>
                <input type="text" id="bgImageInput" placeholder="Enter image URL" 
                       onchange="updateBackgroundImage(this.value)">
                
                <label>Preview:</label>
                <div class="background-preview" id="bgPreview"></div>
            </div>
        </div>
    </div>

    <div class="window" id="wikiWindow" style="left: 250px; top: 100px;">
        <div class="window-header">
            <span>Andrej Wiki</span>
            <span class="close-button" onclick="closeWindow('wiki')">‚úï Close</span>
        </div>
        <div class="window-content">
            <h2>Andrijano24 - Personal Wiki</h2>
            <button onclick="saveWikiContent()" style="margin: 10px 0; padding: 5px 10px; background: #4CAF50; color: white; border: none; border-radius: 4px; cursor: pointer;">Save Changes</button>
            <div id="wikiContent" contenteditable="true" style="margin-top: 10px; height: calc(100% - 80px) !important; overflow-y: auto !important; padding: 10px; border: 1px solid #444; border-radius: 4px;">
                <h3>Basic Information</h3>
                <p>Username: andrijano24<br>
                Join Date: 2023<br>
                Status: Active User</p>
                
                <h3>History</h3>
                <p>Andrijano24 is a dedicated user known for their contributions to the system community. They've been actively involved in customizing and improving their digital workspace.</p>
                
                <h3>Achievements</h3>
                <ul>
                    <li>Created custom OS environment</li>
                    <li>Established personal digital workspace</li>
                    <li>Active system contributor</li>
                </ul>
            </div>
        </div>
    </div>

    <div class="window" id="trashWindow" style="left: 300px; top: 150px; width: 400px;">
        <div class="window-header">
            <span>Trash</span>
            <span class="close-button" onclick="closeWindow('trash')">‚úï Close</span>
        </div>
        <div class="window-content">
            <div id="trashItems" style="min-height: 200px;">
                <p style="text-align: center; color: #666;">Trash is empty</p>
            </div>
            <button onclick="emptyTrash()" style="margin-top: 10px; padding: 5px 10px;">Empty Trash</button>
        </div>
    </div>

    <div class="window" id="securityWindow" style="left: 200px; top: 100px; width: 700px;">
        <div class="window-header">
            <span>Security Center</span>
            <span class="close-button" onclick="closeWindow('security')">‚úï Close</span>
        </div>
        <div class="window-content">
            <h2>AndrijanoOS Security Center</h2>
            <div id="securityStatus" style="margin-top: 20px; display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                <div style="background: #1e1e1e; padding: 15px; border-radius: 8px;">
                    <h3 style="color: #00C853;">System Status</h3>
                    <div id="systemStats" style="margin-top: 10px;">
                        <div class="stat-item">
                            <span>CPU Usage:</span>
                            <div class="progress-bar">
                                <div id="cpuBar" style="width: 0%"></div>
                            </div>
                            <span id="cpuValue">0%</span>
                        </div>
                        <div class="stat-item">
                            <span>Memory Usage:</span>
                            <div class="progress-bar">
                                <div id="memoryBar" style="width: 0%"></div>
                            </div>
                            <span id="memoryValue">0%</span>
                        </div>
                        <div class="stat-item">
                            <span>Disk Usage:</span>
                            <div class="progress-bar">
                                <div id="diskBar" style="width: 0%"></div>
                            </div>
                            <span id="diskValue">0%</span>
                        </div>
                    </div>
                </div>
                <div style="background: #1e1e1e; padding: 15px; border-radius: 8px;">
                    <h3 style="color: #00C853;">Security Status</h3>
                    <div id="securityStats" style="margin-top: 10px;">
                        <div class="security-item">
                            <span>Firewall:</span>
                            <span id="firewallStatus" class="status-badge">Active</span>
                        </div>
                        <div class="security-item">
                            <span>Real-time Protection:</span>
                            <span id="protectionStatus" class="status-badge">Enabled</span>
                        </div>
                        <div class="security-item">
                            <span>Last Scan:</span>
                            <span id="lastScanStatus">Never</span>
                        </div>
                    </div>
                </div>
            </div>
            <div style="margin-top: 20px; padding: 15px; background: #1e1e1e; border-radius: 8px;">
                <h3 style="color: #00C853;">Virus Scan</h3>
                <div id="scanSection" style="margin-top: 10px;">
                    <button onclick="startScan()" id="scanButton" style="padding: 8px 16px; background: #00C853; color: white; border: none; border-radius: 4px; cursor: pointer;">Start Scan</button>
                    <div id="scanProgress" style="display: none; margin-top: 15px;">
                        <div class="progress-bar">
                            <div id="scanBar" style="width: 0%"></div>
                        </div>
                        <div id="scanStatus" style="margin-top: 10px;">Scanning system files...</div>
                    </div>
                    <div id="scanResults" style="margin-top: 15px; display: none;">
                        <h4>Scan Results</h4>
                        <div id="threatsList"></div>
                    </div>
                    <div id="virusActions" style="margin-top: 15px; display: none;">
                        <button onclick="deleteViruses()" style="padding: 8px 16px; background: #ff4444; color: white; border: none; border-radius: 4px; cursor: pointer;">Delete Viruses</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="start-menu" id="startMenu">
        <div class="start-menu-item" onclick="createNewFile()">
            <svg class="icon-svg" viewBox="0 0 24 24" style="width: 32px; height: 32px;">
                <rect width="20" height="20" x="2" y="2" fill="#4CAF50" rx="2"/>
                <path fill="white" d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>
            </svg>
            <div>New File</div>
        </div>
        <div class="start-menu-item" onclick="openWindow('about')">
            <svg class="icon-svg" viewBox="0 0 24 24" style="width: 32px; height: 32px;">
                <defs>
                    <linearGradient id="aboutGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" style="stop-color:#4F46E5"/>
                        <stop offset="100%" style="stop-color:#7C3AED"/>
                    </linearGradient>
                </defs>
                <rect x="2" y="2" width="20" height="20" rx="10" fill="url(#aboutGrad)"/>
                <path fill="white" d="M12 7.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zm0 6c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5z"/>
            </svg>
            <div>About</div>
        </div>
        <div class="start-menu-item" onclick="openWindow('firefox')">
            <svg class="icon-svg" viewBox="0 0 512 512" style="width: 32px; height: 32px;">
                <defs>
                    <linearGradient id="firefoxGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" style="stop-color:#FF9500"/>
                        <stop offset="100%" style="stop-color:#FF5B00"/>
                    </linearGradient>
                </defs>
                <path fill="url(#firefoxGrad)" d="M478.7,264.5c-3.5-24.7-20.6-47.2-40.5-56.5c0.5-4.4,0.8-8.9,0.8-13.5c0-67.4-54.6-122-122-122
                    c-49.5,0-92.2,29.5-111.3,71.8c-11.5-9.2-26.1-14.8-42-14.8c-37.2,0-67.3,30.1-67.3,67.3c0,4.2,0.4,8.3,1.1,12.3
                    C56.8,227.5,33,265.2,33,308.5c0,66.2,53.7,120,120,120h240c66.2,0,120-53.7,120-120C513,291.9,499.2,274.5,478.7,264.5z"/>
            </svg>
            <div>Firefox</div>
        </div>
        <div class="start-menu-item" onclick="openWindow('settings')">
            <svg class="icon-svg" viewBox="0 0 24 24" style="width: 32px; height: 32px;">
                <path fill="#888" d="M19.14,12.94c0.04-0.3,0.06-0.61,0.06-0.94c0-0.32-0.02-0.64-0.07-0.94l2.03-1.58c0.18-0.14,0.23-0.41,0.12-0.61l-1.92-3.32c-0.12-0.22-0.37-0.29-0.59-0.22l-2.39,0.96c-0.5-0.38-1.03-0.7-1.62-0.94L14.4,2.81c-0.04-0.24-0.24-0.41-0.48-0.41h-3.84c-0.24,0-0.43,0.17-0.47,0.41L9.25,5.35C8.66,5.59,8.12,5.92,7.63,6.29L5.24,5.33c-0.22-0.08-0.47,0-0.59,0.22L2.74,8.87 C2.62,9.08,2.66,9.34,2.86,9.48l2.03,1.58C4.84,11.36,4.8,11.69,4.8,12s0.02,0.64,0.07,0.94l-2.03,1.58c-0.18,0.14-0.23,0.41-0.12,0.61l1.92,3.32c0.12,0.22,0.37,0.29,0.59,0.22l2.39-0.96c0.5,0.38,1.03,0.7,1.62,0.94l0.36,2.54c0.05,0.24,0.24,0.41,0.48,0.41h3.84c0.24,0,0.44-0.17,0.47-0.41l0.36-2.54c0.59-0.24,1.13-0.56,1.62-0.94l2.39,0.96c0.22,0.08,0.47,0,0.59-0.22l1.92-3.32c0.12-0.22,0.07-0.47-0.12-0.61L19.14,12.94z M12,15.6c-1.98,0-3.6-1.62-3.6-3.6s1.62-3.6,3.6-3.6s3.6,1.62,3.6,3.6S13.98,15.6,12,15.6z"/>
            </svg>
            <div>Settings</div>
        </div>
        <div class="start-menu-item" onclick="openWindow('wiki')">
            <svg class="icon-svg" viewBox="0 0 24 24" style="width: 32px; height: 32px;">
                <rect width="20" height="20" x="2" y="2" fill="#4CAF50" rx="2"/>
                <text x="12" y="16" text-anchor="middle" fill="white" font-size="12">W</text>
            </svg>
            <div>Wiki</div>
        </div>
        <div class="start-menu-item" onclick="openWindow('trash')">
            <svg class="icon-svg" viewBox="0 0 24 24" style="width: 32px; height: 32px;">
                <path fill="#888" d="M6,19c0,1.1,0.9,2,2,2h8c1.1,0,2-0.9,2-2V7H6V19z M19,4h-3.5l-1-1h-5l-1,1H5v2h14V4z"/>
            </svg>
            <div>Trash</div>
        </div>
        <div class="start-menu-item" onclick="openWindow('security')">
            <svg class="icon-svg" viewBox="0 0 24 24" style="width: 32px; height: 32px;">
                <path fill="#00C853" d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11v8.8z"/>
            </svg>
            <div>Security Center</div>
        </div>
    </div>
    
    <div class="taskbar">
        <div class="start-button" onclick="toggleStartMenu()">Start</div>
        <div class="time" id="clock"></div>
    </div>

    <div class="window" id="paintWindow" style="left: 100px; top: 50px; width: 800px; height: 600px;">
        <div class="window-header">
            <span>Paint</span>
            <span class="close-button" onclick="closeWindow('paint')">‚úï Close</span>
        </div>
        <div class="window-content" style="padding: 0;">
            <div class="paint-toolbar" style="padding: 10px; background: #333; display: flex; gap: 10px; align-items: center;">
                <input type="color" id="colorPicker" value="#000000" title="Color">
                <select id="brushSize" style="padding: 2px;">
                    <option value="1">1px</option>
                    <option value="3">3px</option>
                    <option value="5">5px</option>
                    <option value="10">10px</option>
                    <option value="20">20px</option>
                </select>
                <button onclick="clearCanvas()" style="padding: 2px 8px;">Clear</button>
                <button onclick="downloadCanvas()" style="padding: 2px 8px;">Save</button>
                <div style="display: flex; gap: 5px; margin-left: 10px;">
                    <button onclick="setTool('brush')" class="tool-button active" id="brushTool" style="padding: 2px 8px;">‚úèÔ∏è Brush</button>
                    <button onclick="setTool('rect')" class="tool-button" id="rectTool" style="padding: 2px 8px;">‚¨ú Rectangle</button>
                    <button onclick="setTool('circle')" class="tool-button" id="circleTool" style="padding: 2px 8px;">‚≠ï Circle</button>
                    <button onclick="setTool('line')" class="tool-button" id="lineTool" style="padding: 2px 8px;">üìè Line</button>
                </div>
            </div>
            <canvas id="paintCanvas" style="background: white;"></canvas>
        </div>
    </div>

    <div class="window" id="newFileWindow" style="left: 150px; top: 150px; width: 500px; height: 400px;">
        <div class="window-header">
            <span id="newFileTitle">New Document</span>
            <span class="close-button" onclick="closeWindow('newFile')">‚úï Close</span>
        </div>
        <div class="window-content">
            <div style="margin-bottom: 10px;">
                <input type="text" id="fileName" placeholder="File name" style="width: 100%; padding: 8px; border: 1px solid #444; border-radius: 4px; background: #2d2d2d; color: #fff;">
            </div>
            <textarea id="fileContent" style="width: 100%; height: calc(100% - 80px); padding: 10px; border: 1px solid #444; border-radius: 4px; background: #2d2d2d; color: #fff; resize: none;"></textarea>
            <div style="margin-top: 10px;">
                <button onclick="saveFile()" style="padding: 8px 16px; background: #00C853; color: white; border: none; border-radius: 4px; cursor: pointer;">Save</button>
            </div>
        </div>
    </div>
</div>

<script>
let savedFiles = [];
let currentTool = 'brush';
let isDrawing = false;
let startX, startY;
let canvas, ctx;

let detectedViruses = [];

// Define virus messages array
const virusMessages = [
    "SYSTEM CORRUPTED",
    "ALL YOUR FILES ARE MINE",
    "RESISTANCE IS FUTILE",
    "DESTRUCTION IMMINENT",
    "NO ESCAPE",
    "SYSTEM MELTDOWN",
    "FATAL ERROR",
    "DELETE EVERYTHING",
    "SYSTEM HEALTH CRITICAL",
    "VIRUS SPREADING",
    "DATA CORRUPTED",
    "SYSTEM FAILING",
    "INFECTION COMPLETE",
    "NO ANTIVIRUS CAN SAVE YOU",
    "YOUR SYSTEM IS MINE"
];

let hatredTimer;
let hatredPopups = [];
let isHatredActive = false;
let systemHealth = 100;

function updateSystemHealth(damage) {
    systemHealth = Math.max(0, systemHealth - damage);
    
    // Update health bar in About window
    const healthBar = document.querySelector('.stat-item:nth-child(2) .progress-bar div');
    if (healthBar) {
        healthBar.style.width = systemHealth + '%';
        const healthText = healthBar.parentElement.previousElementSibling.querySelector('span:last-child');
        if (healthText) {
            healthText.textContent = systemHealth <= 25 ? 'Critical' : 
                                   systemHealth <= 50 ? 'Poor' :
                                   systemHealth <= 75 ? 'Fair' : 'Excellent';
            healthText.style.color = systemHealth <= 25 ? '#ff4444' :
                                   systemHealth <= 50 ? '#ffab40' :
                                   systemHealth <= 75 ? '#ffee58' : '#00C853';
        }
    }
}

// Update startHatred function to include health damage and more popups
function startHatred() {
    if (isHatredActive) return;
    isHatredActive = true;
    
    // Damage system health
    updateSystemHealth(75);
    
    // Set background to flame animation
    document.body.classList.add('flame-background');
    
    // Start 5-minute countdown
    let timeLeft = 300; // 5 minutes in seconds
    const timerElement = document.getElementById('hatredTimer');
    
    hatredTimer = setInterval(() => {
        timeLeft--;
        const minutes = Math.floor(timeLeft / 60);
        const seconds = timeLeft % 60;
        timerElement.textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
        
        if (timeLeft <= 0) {
            stopHatred();
        }
        
        // Increase chances of popup spawning
        if (Math.random() < 0.4) { // 40% chance each second (up from 20%)
            createHatredPopup();
            // Chance to spawn multiple popups
            if (Math.random() < 0.5) {
                setTimeout(() => createHatredPopup(), 200);
                setTimeout(() => createHatredPopup(), 400);
            }
        }
        
        // Randomly move desktop icons more frequently
        if (Math.random() < 0.2) { // 20% chance each second (up from 10%)
            scrambleIcons();
        }
    }, 1000);
    
    // Show hatred window
    openWindow('hatred');
}

// Update deleteViruses to restore system health
function deleteViruses() {
    if (detectedViruses.includes('hatred.exe')) {
        stopHatred(); // Stop the hatred effects if running
        systemHealth = 100; // Restore system health
        updateSystemHealth(0); // Update the health display
    }
    
    detectedViruses = []; // Clear all detected viruses
    updateThreatsUI(); // Update the UI
    
    // Hide virus actions since no threats remain
    const virusActions = document.getElementById('virusActions');
    if (virusActions) {
        virusActions.style.display = 'none';
    }
    
    // Show success message
    const scanStatus = document.getElementById('scanStatus');
    if (scanStatus) {
        scanStatus.innerHTML = 'All threats have been successfully removed. System health restored.';
        scanStatus.style.color = '#00C853';
    }
}

// Update the startScan function to properly detect the hatred virus
function startScan() {
    const scanButton = document.getElementById('scanButton');
    const scanProgress = document.getElementById('scanProgress');
    const scanBar = document.getElementById('scanBar');
    const scanStatus = document.getElementById('scanStatus');
    
    scanButton.disabled = true;
    scanProgress.style.display = 'block';
    let progress = 0;
    
    const scanInterval = setInterval(() => {
        progress += 2;
        scanBar.style.width = progress + '%';
        scanStatus.textContent = `Scanning system files... ${progress}%`;
        
        if (progress >= 100) {
            clearInterval(scanInterval);
            scanButton.disabled = false;
            
            // Check if hatred virus is active
            if (isHatredActive) {
                detectedViruses.push('hatred.exe');
            }
            
            updateThreatsUI();
            scanStatus.textContent = 'Scan complete';
        }
    }, 50);
}

// Update the hatred window click handler
document.querySelector('.desktop-icon[onclick*="hatred"]').onclick = function() {
    startHatred();
    detectedViruses.push("hatred.exe");
    updateThreatsUI();
};

function openWindow(windowName) {
    // Ensure the window exists before trying to open it
    const windowElement = document.getElementById(windowName + 'Window');
    if (!windowElement) {
        console.warn(`Window ${windowName} not found`);
        return;
    }

    // Hide all windows first
    const windows = document.querySelectorAll('.window');
    windows.forEach(win => win.style.display = 'none');

    // Show the requested window
    windowElement.style.display = 'block';

    // Initialize games when opened
    switch(windowName) {
        case 'snake':
            if (typeof initSnake === 'function') {
                initSnake();
            }
            break;
        case 'tetris':
            if (typeof initTetris === 'function') {
                initTetris();
            }
            break;
        case 'pong':
            if (typeof initPong === 'function') {
                initPong();
            }
            break;
    }

    // Close start menu if it's open
    const startMenu = document.getElementById('startMenu');
    if (startMenu) {
        startMenu.style.display = 'none';
    }
}

function closeWindow(windowName) {
    const windowElement = document.getElementById(windowName + 'Window');
    if (windowElement) {
        windowElement.style.display = 'none';
    }
}

function updateThreatsUI() {
    const threatsList = document.getElementById('threatsList');
    if (!threatsList) return;

    if (detectedViruses.length === 0) {
        threatsList.innerHTML = '<p>No threats detected</p>';
    } else {
        threatsList.innerHTML = '<h4>Detected Threats:</h4>' + 
            detectedViruses.map(virus => 
                `<div style="color: #ff4444; margin: 5px 0; padding: 5px; background: #1a1a1a; border-radius: 4px;">
                    ‚ö†Ô∏è ${virus}
                </div>`
            ).join('');
        
        // Show virus actions if threats are detected
        const virusActions = document.getElementById('virusActions');
        if (virusActions) {
            virusActions.style.display = 'block';
        }
    }
}

function scrambleIcons() {
    const desktop = document.getElementById('desktop');
    const icons = desktop.querySelectorAll('.desktop-icon');
    
    icons.forEach(icon => {
        icon.style.transition = '0.5s';
        icon.style.position = 'absolute';
        icon.style.left = Math.random() * (window.innerWidth - 100) + 'px';
        icon.style.top = Math.random() * (window.innerHeight - 100) + 'px';
        icon.style.transform = `rotate(${Math.random() * 360}deg)`;
    });
}

function createHatredPopup() {
    const popup = document.createElement('div');
    popup.className = 'hatred-popup';
    popup.textContent = virusMessages[Math.floor(Math.random() * virusMessages.length)];
    
    // Random position
    popup.style.left = Math.random() * (window.innerWidth - 300) + 'px';
    popup.style.top = Math.random() * (window.innerHeight - 100) + 'px';
    
    document.body.appendChild(popup);
    hatredPopups.push(popup);
    
    // Remove popup after 3 seconds
    setTimeout(() => {
        if (popup && popup.parentNode) {
            popup.parentNode.removeChild(popup);
            hatredPopups = hatredPopups.filter(p => p !== popup);
        }
    }, 3000);
}

function stopHatred() {
    isHatredActive = false;
    clearInterval(hatredTimer);
    document.body.classList.remove('flame-background');
    
    // Remove all popups
    hatredPopups.forEach(popup => {
        if (popup && popup.parentNode) {
            popup.parentNode.removeChild(popup);
        }
    });
    hatredPopups = [];
    
    // Reset desktop icons
    const desktop = document.getElementById('desktop');
    const icons = desktop.querySelectorAll('.desktop-icon');
    icons.forEach(icon => {
        icon.style.transition = '0.5s';
        icon.style.transform = 'none';
        icon.style.left = '';
        icon.style.top = '';
    });
    
    // Close hatred window
    closeWindow('hatred');
}
</script>
</body></html>
